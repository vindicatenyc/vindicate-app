name: Agent Task Dispatch

on:
  issues:
    types: [opened, labeled]

jobs:
  notify-agent:
    runs-on: ubuntu-latest
    steps:
      - name: Check labels and notify
        uses: actions/github-script@v7
        with:
          script: |
            const labels = context.payload.issue.labels.map(l => l.name);
            const agentLabels = ['testing', 'documentation', 'security', 'performance', 'marketing', 'frontend', 'backend', 'compliance', 'architecture'];

            const assignedAgent = labels.find(l => agentLabels.includes(l));

            if (assignedAgent && labels.includes('ready')) {
              console.log(`Task ready for agent: ${assignedAgent}`);
              // Future: Trigger agent workflow or notification
            }
